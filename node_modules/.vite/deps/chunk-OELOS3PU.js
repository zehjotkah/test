import {
  createJsonStringifyProxy,
  isPlainObject
} from "./chunk-POFZVH7J.js";
import {
  require_react
} from "./chunk-OXMAUKK4.js";
import {
  __toESM
} from "./chunk-DC5AMYBS.js";

// node_modules/@webstudio-is/react-sdk/lib/runtime.js
var import_react = __toESM(require_react());
var import_react2 = __toESM(require_react());
var ReactSdkContext = (0, import_react.createContext)({
  assetBaseUrl: "/",
  imageBaseUrl: "/",
  imageLoader: ({ src }) => src,
  resources: {}
});
var useResource = (name) => {
  const { resources } = (0, import_react.useContext)(ReactSdkContext);
  const resource = resources[name];
  const resourceMemozied = (0, import_react.useMemo)(
    () => isPlainObject(resource) ? createJsonStringifyProxy(resource) : resource,
    [resource]
  );
  return resourceMemozied;
};
var getClosestInstance = (instancePath, currentInstance, closestComponent) => {
  let matched = false;
  for (const instance of instancePath) {
    if (currentInstance === instance) {
      matched = true;
    }
    if (matched && instance.component === closestComponent) {
      return instance;
    }
  }
};
var useVariableState = (initialState) => {
  const [state, setState] = (0, import_react2.useState)(initialState);
  const value = (0, import_react2.useMemo)(
    () => isPlainObject(state) ? createJsonStringifyProxy(state) : state,
    [state]
  );
  return [value, setState];
};
var getIndexWithinAncestorFromComponentProps = (props) => {
  return props["data-ws-index"];
};

export {
  ReactSdkContext,
  useResource,
  getClosestInstance,
  useVariableState,
  getIndexWithinAncestorFromComponentProps
};
//# sourceMappingURL=chunk-OELOS3PU.js.map
